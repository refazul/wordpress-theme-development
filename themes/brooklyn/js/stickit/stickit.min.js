!function(t){function e(e,i){this.element=t(e),this.lastValues={},t.isArray(i)||(i=[i||{}]),i.length||i.push({}),this.optionList=i;var s=this.element.css("transform")||"";this.defaultZIndex=this.element.css("z-index")||100,"auto"==this.defaultZIndex?this.defaultZIndex=100:"0"==this.defaultZIndex&&"none"!=s&&(this.defaultZIndex=100),this.updateOptions(),this.offsetY=0,this.lastY=0,this.stick=u.None,this.spacer=t("<div />"),this.spacer[0].id=e.id,this.spacer[0].className=e.className,this.spacer[0].style.cssText=e.style.cssText,this.spacer.addClass(r),this.spacer[0].style.cssText+=";visibility: hidden !important;display: none !important",this.spacer.insertAfter(this.element),"static"==this.element.parent().css("position")&&this.element.parent().css("position","relative"),this.origWillChange=this.element.css("will-change"),"auto"==this.origWillChange&&this.element.css("will-change","transform"),"none"==s?this.element.css("transform","translateZ(0)"):-1==s.indexOf("matrix3d")&&this.element.css("transform",this.element.css("transform")+" translateZ(0)"),this.bound(),this.precalculate(),this.store()}function i(){b=window.innerHeight||document.documentElement.clientHeight,x=window.innerWidth||document.documentElement.clientWidth,s()}function s(){m=!0,t(l).each(function(){t(this).data(a).refresh()}),setTimeout(function(){m=!1})}function o(){m=!0,t(l).each(function(){t(this).data(a).locate()}),setTimeout(function(){m=!1})}function n(){var e=!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement);t(l).each(function(){t(this).data(a).enableWillChange(!e)})}function h(t){m||s()}var a="jquery-stickit",r=a+"-spacer",l=":"+a,c=-1!=navigator.userAgent.indexOf("MSIE 7.0"),p=c?-2:0,d=void 0!==window.MutationObserver,f=window.StickScope={Parent:0,Document:1},u={None:0,Fixed:1,Absolute:2},g=!1,m=!1;t.expr[":"][a]=function(e){return!!t(e).data(a)},e.prototype.trigger=function(t){var e="on"+t.charAt(0).toUpperCase()+t.slice(1);this.options[e]&&this.options[e].call(this.element),this.element.trigger("stickit:"+t)},e.prototype.isActive=function(t){return(void 0===t.screenMinWidth||x>=t.screenMinWidth)&&(void 0===t.screenMaxWidth||x<=t.screenMaxWidth)},e.prototype.updateCss=function(t){this.element.hasClass(this.options.className)&&t.className!=this.options.className&&this.element.removeClass(this.options.className).addClass(t.className);var e={};this.stick==u.Absolute?this.options.extraHeight!=t.extraHeight&&(e.bottom=-this.options.extraHeight+"px"):this.options.top!=t.top&&(e.top=t.top+this.offsetY+"px"),this.options.zIndex!=t.zIndex&&(e.zIndex=this.getZIndex(t)),this.element.css(e)},e.prototype.updateOptions=function(){var t=this.getActiveOptionsKey();if(this.activeKey!=t){this.activeKey=t;var e=this.getActiveOptions();this.options&&(t?this.stick!=u.None&&(e.scope==this.options.scope?this.updateCss(e):(this.reset(),setTimeout(this.locate.bind(this)))):this.reset()),this.options=e,this.zIndex=this.getZIndex(e)}},e.prototype.getZIndex=function(t){return void 0===t.zIndex?this.defaultZIndex:t.zIndex},e.prototype.getActiveOptionsKey=function(){for(var t=[],e=0;e<this.optionList.length;++e)this.isActive(this.optionList[e])&&t.push(e);return t.join("_")},e.prototype.getActiveOptions=function(){for(var e={},i=0;i<this.optionList.length;++i){var s=this.optionList[i];this.isActive(s)&&t.extend(e,s)}return e.scope=e.scope||f.Parent,e.className=e.className||"stick",e.top=e.top||0,e.extraHeight=e.extraHeight||0,void 0===e.overflowScrolling&&(e.overflowScrolling=!0),e},e.prototype.store=function(){var t=this.element[0];this.origStyle={width:t.style.width,position:t.style.position,left:t.style.left,top:t.style.top,bottom:t.style.bottom,zIndex:t.style.zIndex}},e.prototype.restore=function(){this.element.css(this.origStyle)},e.prototype.bound=function(){var t=this.element;if(c||"border-box"!=t.css("box-sizing"))this.extraWidth=0;else{var e=parseFloat(t.css("border-left-width"))||0,i=parseFloat(t.css("border-right-width"))||0,s=parseFloat(t.css("padding-left"))||0,o=parseFloat(t.css("padding-right"))||0;this.extraWidth=e+i+s+o}this.margin={top:parseFloat(t.css("margin-top"))||0,bottom:parseFloat(t.css("margin-bottom"))||0,left:parseFloat(t.css("margin-left"))||0,right:parseFloat(t.css("margin-right"))||0},this.parent={border:{bottom:parseFloat(t.parent().css("border-bottom-width"))||0}}},e.prototype.precalculate=function(){this.baseTop=this.margin.top+this.options.top,this.basePadding=this.baseTop+this.margin.bottom,this.baseParentOffset=this.options.extraHeight-this.parent.border.bottom,this.offsetHeight=this.options.overflowScrolling?Math.max(this.element.outerHeight(!1)+this.basePadding-b,0):0,this.minOffsetHeight=-this.offsetHeight},e.prototype.reset=function(){this.stick==u.Absolute?(this.trigger("unend"),this.trigger("unstick")):this.stick==u.Fixed&&this.trigger("unstick"),this.stick=u.None,this.spacer.css("width",this.origStyle.width),this.spacer[0].style.cssText+=";display: none !important",this.restore(),this.element.removeClass(this.options.className)},e.prototype.setAbsolute=function(t){this.stick==u.None?(this.element.addClass(this.options.className),this.trigger("stick"),this.trigger("end")):this.trigger("end"),this.stick=u.Absolute,this.element.css({width:this.element.width()+this.extraWidth+"px",position:"absolute",top:this.origStyle.top,left:t+"px",bottom:-this.options.extraHeight+"px","z-index":this.zIndex})},e.prototype.setFixed=function(t,e,i){this.stick==u.None?(this.element.addClass(this.options.className),this.trigger("stick")):this.trigger("unend"),this.options.overflowScrolling||(i=0),this.stick=u.Fixed,this.lastY=e,this.offsetY=i,this.element.css({width:this.element.width()+this.extraWidth+"px",position:"fixed",top:this.options.top+i+"px",left:t+"px",bottom:this.origStyle.bottom,"z-index":this.zIndex})},e.prototype.updateScroll=function(t){if(0!=this.offsetHeight&&this.options.overflowScrolling){var e=Math.max(this.offsetY+t-this.lastY,this.minOffsetHeight);e=Math.min(e,0),this.lastY=t,this.offsetY!=e&&(this.offsetY=e,this.element.css("top",this.options.top+this.offsetY+"px"))}},e.prototype.isHeigher=function(){return this.options.scope==f.Parent&&this.element.parent().height()<=this.element.outerHeight(!1)+this.margin.bottom},e.prototype.locate=function(){if(this.activeKey){var t,e,i,s=this.element,o=this.spacer;switch(this.stick){case u.Fixed:(e=(t=o[0].getBoundingClientRect()).top-this.baseTop)>=0||this.isHeigher()?this.reset():this.options.scope==f.Parent&&(t=s.parent()[0].getBoundingClientRect()).bottom+this.baseParentOffset+this.offsetHeight<=s.outerHeight(!1)+this.basePadding?this.setAbsolute(this.spacer.position().left):this.updateScroll(t.bottom);break;case u.Absolute:e=(t=o[0].getBoundingClientRect()).top-this.baseTop,i=t.left-this.margin.left,e>=0||this.isHeigher()?this.reset():(t=s.parent()[0].getBoundingClientRect()).bottom+this.baseParentOffset+this.offsetHeight>s.outerHeight(!1)+this.basePadding&&this.setFixed(i+p,t.bottom,-this.offsetHeight);break;case u.None:default:if(t=s[0].getBoundingClientRect(),(e=t.top-this.baseTop)>=0||this.isHeigher())return;var n=s.parent()[0].getBoundingClientRect();o.height(s.height()),o.show(),i=t.left-this.margin.left,this.options.scope==f.Document?this.setFixed(i,t.bottom,0):n.bottom+this.baseParentOffset+this.offsetHeight<=s.outerHeight(!1)+this.basePadding?this.setAbsolute(this.element.position().left):this.setFixed(i+p,t.bottom,0),o.width()||o.width(s.width())}}},e.prototype.refresh=function(){if(this.updateOptions(),this.bound(),this.precalculate(),this.stick!=u.None){var t=this.element,e=this.spacer;if(this.lastValues.width!=e.width()&&t.width(this.lastValues.width=e.width()),this.lastValues.height!=t.height()&&e.height(this.lastValues.height=t.height()),this.stick==u.Fixed){var i=this.spacer[0].getBoundingClientRect().left-this.margin.left;this.lastValues.left!=i+"px"&&t.css("left",this.lastValues.left=i+"px")}this.locate()}else this.locate()},e.prototype.destroy=function(){this.reset(),this.spacer.remove(),this.element.removeData(a)},e.prototype.enableWillChange=function(t){"auto"==this.origWillChange&&this.element.css("will-change",t?"transform":this.origWillChange)};var b,x,y=["destroy","refresh"];t.fn.stickit=function(s,r){if("string"==typeof s){if(-1!=t.inArray(s,y)){var l=arguments;this.each(function(){var e=t(this).data(a);e&&e[s].apply(e,Array.prototype.slice.call(l,1))})}}else{if(!g&&(g=!0,i(),t(document).ready(function(){t(window).bind("resize",i).bind("scroll",o),t(document.body).bind("animationend webkitAnimationEnd oAnimationEnd transitionend webkitTransitionEnd oTransitionEnd",o),t(document).bind("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",n)}),d)){new MutationObserver(h).observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}r=t.isArray(s)?s:Array.prototype.slice.call(arguments,0),this.each(function(){var i=new e(this,r);t(this).data(a,i),i.locate()})}return this},t.stickit={refresh:s}}(jQuery);